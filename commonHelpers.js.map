{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".inputsrc\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\n\nconst loadbtn = document.querySelector(\".loadbtn\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250\n});\n\nlet page = 1;\nlet perPage = 40;\nlet searchParams;\n\nloadbtn.addEventListener(\"click\", loadMoreBtn());\n\nasync function loadMoreBtn() {\n  await postGallery();\n}\n\nfunction postGallery() {\nform.addEventListener(\"submit\", async event => {\n  event.preventDefault();\n  let userInput = input.value\n\n  searchParams = {\n    params: {\n      key: '41766309-9b727aff341ca6e5a641aa2fb',\n      q: `${userInput}`,\n      orientation: 'horizontal',\n      per_page: perPage,\n      page: page,\n      image_type: 'photo',\n      safesearch: true,\n      order: 'likes',\n    },\n  }; \n  \n  try {\n    loader.classList.remove('hide');\n\n    const response = await axios.get(\n    'https://pixabay.com/api/',\n    searchParams);\n    \n    const images = response.data;\n    console.log(searchParams.params.page);\n\n    setTimeout(() => {\n      loader.classList.add('hide');\n      gallery.innerHTML = \"\";\n      if (response.data.totalHits > 0) {\n        const imglist = images.hits.reduce((html, hit) => {\n          return (\n            html +\n            `<li>\n          <a href=\"${hit.largeImageURL}\">\n            <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery-image\">\n          </a>\n          <div class=\"info\">\n            <div class=\"field\">\n              <span class=\"label\">Likes</span>\n              <span class=\"value\">${hit.likes}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Views</span>\n              <span class=\"value\">${hit.views}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Comments</span>\n              <span class=\"value\">${hit.comments}</span>\n            </div>\n            <div class=\"field\">\n              <span class=\"label\">Downloads</span>\n              <span class=\"value\">${hit.downloads}</span>\n            </div>\n          </div>\n          </li>`\n          )\n        }, '')\n        gallery.insertAdjacentHTML('beforeend', imglist);\n        lightbox.refresh();\n        \n      } else {\n        iziToast.error({\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight'\n        });\n      }\n      updateButtonVisibility();\n    }, 2000);\n  }\n    catch (error) {\n        console.log(error);\n    } finally {\n    form.reset();\n\n    }\n});\n}\n\nfunction updateButtonVisibility() {\n  if (gallery.innerHTML.trim() === \"\") {\n    loadbtn.classList.add(\"hide\");\n  } else {\n    loadbtn.classList.remove(\"hide\");\n  }\n}\n"],"names":["form","input","loader","gallery","loadbtn","lightbox","SimpleLightbox","page","perPage","searchParams","loadMoreBtn","postGallery","event","response","axios","images","imglist","html","hit","iziToast","updateButtonVisibility","error"],"mappings":"owBAQA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,WAAW,EAC1CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EAAO,EACPC,EAAU,GACVC,EAEJL,EAAQ,iBAAiB,QAASM,EAAW,CAAE,EAE/C,eAAeA,GAAc,CAC3B,MAAMC,EAAW,CACnB,CAEA,SAASA,GAAc,CACvBX,EAAK,iBAAiB,SAAU,MAAMY,GAAS,CAC7CA,EAAM,eAAc,EAGpBH,EAAe,CACb,OAAQ,CACN,IAAK,qCACL,EAAG,GALSR,EAAM,QAMlB,YAAa,aACb,SAAUO,EACV,KAAMD,EACN,WAAY,QACZ,WAAY,GACZ,MAAO,OACR,CACL,EAEE,GAAI,CACFL,EAAO,UAAU,OAAO,MAAM,EAE9B,MAAMW,EAAW,MAAMC,EAAM,IAC7B,2BACAL,CAAY,EAENM,EAASF,EAAS,KACxB,QAAQ,IAAIJ,EAAa,OAAO,IAAI,EAEpC,WAAW,IAAM,CAGf,GAFAP,EAAO,UAAU,IAAI,MAAM,EAC3BC,EAAQ,UAAY,GAChBU,EAAS,KAAK,UAAY,EAAG,CAC/B,MAAMG,EAAUD,EAAO,KAAK,OAAO,CAACE,EAAMC,IAEtCD,EACA;AAAA,qBACSC,EAAI;AAAA,wBACDA,EAAI,sBAAsBA,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA,oCAKlBA,EAAI;AAAA;AAAA;AAAA;AAAA,oCAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,oCAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,oCAIJA,EAAI;AAAA;AAAA;AAAA,iBAK7B,EAAE,EACLf,EAAQ,mBAAmB,YAAaa,CAAO,EAC/CX,EAAS,QAAO,CAExB,MACQc,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UACpB,CAAS,EAEHC,GACD,EAAE,GAAI,CACR,OACQC,EAAP,CACI,QAAQ,IAAIA,CAAK,CACzB,QAAc,CACVrB,EAAK,MAAK,CAET,CACL,CAAC,CACD,CAEA,SAASoB,GAAyB,CAC5BjB,EAAQ,UAAU,KAAI,IAAO,GAC/BC,EAAQ,UAAU,IAAI,MAAM,EAE5BA,EAAQ,UAAU,OAAO,MAAM,CAEnC"}